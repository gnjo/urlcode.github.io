<head>
 <script src="https://urlcode.github.io/thenload.js" type="text/javascript" ></script>
</head>
<body>
 <script type="text/plane">
＃待ちぼうけ。
＠八万公園：http://www.city.tsurugashima.lg.jp/data/img/1422583771_168.jpg
；＠デモ：
；＊八万公園：さびれた小さな門がある公園。
；
；
；

　公園は雨後もあってか人がいない。
　しかし、水たまりのキラキラ輝いた予感が嬉しそうにやってくるであろう子供たちを連想させた。
　こんなところで缶コーヒーと待ちぼうけをしている場合ではないのだが、まあ、ベンチに立てかけた傘を忘れないようにしよう。そんな事しか今はする事がない。

　待ちぼうけ――。退屈はこの世の癌だ。

　そんなどうしようもない達観を得るくらいに待機の時間が続いた。
　影法師が長く尾を引くとようやく待ち人が現れた。

「待たせたかね？」
「いえ、暇を対価として肺癌を得る風潮がなんとなく理解できましたよ」
　向こうは少し考えたが、すぐにタバコの話をしていると察したようだった。
「次からは駅前の喫煙所を指定するよ」
「待ち会わせには公園でしょう」
「相手が男の私でも？」
「ははは。それは考えないようにしてました」
「そうか、では幻想が崩れないうちに本題に入るとしよう」
　相手は申し訳なかったのか、話を急かした。
　このような些細な貸しでも上手く利用できると考えれば、長々待ったかいがあったと考えることにしよう。それを知ってか知らずか、相手はわざとらしく柔和な笑みを浮かべる。
　老獪という言葉が一瞬浮かんだ。
　油断ならない相手なのかもしれない。
「ん、食事をしながらの方がいいか？」
「いえ、ご飯までには帰りなさいとまわりが訴えているようなので倣いましょう」
「はは。そうだな。手短にしよう――。
　まず、端的に感想をいうと、手の洗い方を知らない奴だ」
「それはママに叱られる」
「それを知っているのか、現在かくれんぼの真っ最中だ」
「都会の密林でかくれんぼとは――」
「当然見つけたら次は鬼ごっこになる、やってる事は今も昔も変わらないのかもしれないな」
「本気度が違います」
「なんだ、かくれんぼは手を抜いていたのか、ませた子だったのか」
　そんなことは、と手でジェスチャーをしながら、本題を促す。

＃夜空に。
＠とある一室Ｘ：https://cdn-ak.f.st-hatena.com/images/fotolife/t/toka-ina/20161214/20161214173748.jpg

電車が轟と音を立てた。
広々と景色を眺められる部屋には違いないのである。
が、終電を過ぎるまで、まるでアラームのように時刻正確に響くこの音は、集中や休憩、生活のタイミングさえ浸食するようにも思える。
それでも一地方にあるこの一室であるから、２分おきに響かないだけ善い方だろう。ここでは電車も午前を回ることはない。

＃データテスト
＠八万公園

；カキクケコ
「ビズでチョコ貰おうなんて魂胆からしておかしいのですよ」
「見え見えの方がクールだろ？」
「見え透いた態度よりはクールですね。五十歩百歩ですが」
「それは人類にとって偉大な一歩だな」
「男の子は宇宙好きですね」
「男の子は宇宙が好きなんじゃない。鋼って言葉にエレクトするんだよ」
「伊賀と甲賀の現在の県庁所在地も知らないでニンジャを語るからおかしなことになるんですよ」
　ん？何処だろう？
「私も知りませんよ。ですからニンジャも語りません。
　答えを知らなくても言いくるめられる質問を持っているのは結構良い武器だと思うのです」 
 </script>
 <script type="text/javascript" >
 var fn=this.fn||{};
fn.g=(s)=>{return document.getElementById(s)};
fn.scrollend=(el)=>{
 return new Promise((sol)=>{
  var count=0;
  var me=function(){
   //console.log(count)
   if(count >10){ sol();return} //safecode
   if(el.scrollHeight - el.scrollTop >= el.clientHeight){ sol(); return}
   else{ window.scroll(0,el.scrollHeight+10) ;setTimeout(()=>{count++;me() },10) }
  };
   me();
 });
}

var css=`textarea,body{margin:0;padding:0;background-color:#111;color:#aaa}
body{margin-left:3rem}
#edit,#ret{width: calc(12/16*42rem);max-width: calc(12/16*42rem);padding-left:0.5rem}
#edit{position:fixed;top:1rem;right:1rem;height:90vh;}
#edit>textarea{border:0px solid;position:absolute;width:100%;height:100%;padding:0.5rem;
background-color:rgba(44,44,44,0.75);outline:none;
}

/**/
#edit,p{font-size: calc(12/16*1rem);margin:0;padding:0;}

h3{margin-bottom:0rem;padding-top:3rem}
h3{font-size:1rem}

sup{float:right;opacity:0.5;font-size:0.5rem}

.gazo{
background-blend-mode:darken;background-color:rgba(0,0,0,0.75);
background-size:cover;
background-position:50% 50%
}

p:after {/*改行*/
    content: '.';
    visibility: hidden;
}
`;

var T=thenload;
T([
 "https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"
 ,css
 ,"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"
 ,"https://urlcode.github.io/autosave.js"
]).then((d)=>{
 
 var I=T.initer;
 var layout=`<span><div id="ret"></div>
<div id="edit"><textarea id="t"></textarea></div></span>`;
 var el=I(layout,(el)=>{return el});
 document.body.appendChild(el);
 
 //////
 var A=autosave,da=fn.g('t')
 ,fdata=()=>{return da.value}
 ,id="xyz"
 ,olddata=A.load(id)
 ,time=10*1000
 ;
 if(olddata){
  da.value=olddata||'';
 }
 
 A((info)=>{
  var data=fdata(),flg=(info.md5 !== A.objectmd5(data));
  if(flg) return data;
 },time,id);

 window.addEventListener('keydown',(ev)=>{
  var flg=(ev.ctrlKey && ev.which ==='S'.charCodeAt(0));
  if(flg){ev.preventDefault(); A.save(id,fdata()); }
 });
window.addEventListener("beforeunload", (ev)=>{
   A.save(id,fdata());
});
///////

fn.md5=A.md5;
var markra=function(){};
markra.lex=function(str){
 markra.nowhash=null;//initialize
 var _str=str.split('\n').map((d)=>{
  var ck=d.charAt(0);
  if(markra._def[ck])return markra._def[ck](d);
  else return markra._def["para"](d);
 }).join('')
 return _str
}
markra.nowhash;
markra._def={
  "para":(str)=>{return '<p>'+str+'</p>'}
 ,"＃":(str)=>{
  markra.nowhash = markra.md5(str);
  var c= 'class="gazo hash-'+markra.nowhash+'"'
  return '<h3 '+c+'>'+str+'</h3>'
 }
 ,"＠":(str)=>{
  var a=str.slice(1).split('：');
  var ret='<sup>'+a[0]+'</sup>';
  if(a[0]){ 
   ret+='<style type="text/css">.hash-'+markra.nowhash+'{'
   +'background-image:url('+ a[1] +')}</style>';
  }
  return ret
 }
 ,"；":(str)=>{
  return '<!-- '+str+' -->';
 }
};
markra.def=function(opt){
 return Object.assign(markra._def,opt)
}
markra.md5=fn.md5;

var ret=fn.g('ret'),Mr=markra;
da.oninput=_.debounce((ev)=>{
  ret.innerHTML=Mr.lex( da.value );
  fn.scrollend(document.body);
},400);

 
////
if(olddata){
 ret.innerHTML=Mr.lex(da.value)
}

//////
});//end thenload
 </script>
</body>
